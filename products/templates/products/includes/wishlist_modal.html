<!-- Wishlist Modal -->
<div class="modal fade" id="wishlistModal" tabindex="-1" aria-labelledby="wishlistModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="wishlistModalLabel">Add to Wishlist</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" action="{% url 'add_to_wishlist' product.id %}">
                    {% csrf_token %}
                    <label for="wishlist">Choose an existing wishlist:</label>
                    <select name="wishlist_id" id="wishlist" class="form-control">
                        <option value="" selected>-- Select a Wishlist --</option>
                        {% if user_wishlists %}
                            {% for wishlist in user_wishlists %}
                                <option value="{{ wishlist.id }}">{{ wishlist.name }}</option>
                            {% endfor %}
                        {% else %}
                            <option value="" disabled>No wishlists available</option>
                        {% endif %}
                    </select>
                    <p class="mt-3">Or create a new wishlist:</p>
                    <input type="text" name="new_wishlist_name" class="form-control" placeholder="Enter wishlist name">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success">Add to Wishlist</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>